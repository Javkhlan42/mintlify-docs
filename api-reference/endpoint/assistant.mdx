---
title: 'Админд и-мэйл илгээх'
api: 'POST /admin/email'
description: 'Систем админд санал, хүсэлт, асуудлын талаар и-мэйл илгээх'
---

<Note>
  Энэхүү endpoint нь хэрэглэгчид **Yellow Book админд и-мэйл илгээх** боломж олгоно. Байгууллагын мэдээлэл засварлах хүсэлт, санал, асуудлын талаар мэдэгдэл илгээхэд ашиглана.
</Note>

## Use Cases

<CardGroup cols={2}>
  <Card title="Мэдээлэл засварлах" icon="pen-to-square">
    Байгууллагын мэдээлэл засварлах хүсэлт
  </Card>
  
  <Card title="Байгууллага нэмүүлэх" icon="circle-plus">
    Шинэ байгууллага нэмүүлэх санал
  </Card>
  
  <Card title="Алдаа мэдэгдэх" icon="bug">
    Системийн алдаа мэдэгдэх
  </Card>
  
  <Card title="Санал өгөх" icon="lightbulb">
    Сайжруулалтын санал өгөх
  </Card>
</CardGroup>

---

## Endpoint

<CodeGroup>
```bash cURL
curl -X POST "https://sharnom.systems/admin/email" \
  -H "Content-Type: application/json" \
  -d '{
    "subject": "Байгууллагын мэдээлэл засварлах хүсэлт",
    "body": "Манай байгууллагын утасны дугаар өөрчлөгдсөн...",
    "from": "manager@company.mn"
  }'
```

```javascript JavaScript
const response = await fetch('https://sharnom.systems/admin/email', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    subject: 'Байгууллагын мэдээлэл засварлах хүсэлт',
    body: 'Манай байгууллагын утасны дугаар өөрчлөгдсөн...',
    from: 'manager@company.mn'
  })
});

const data = await response.json();
if (data.status === 'Success') {
  console.log('И-мэйл амжилттай илгээгдлээ');
}
```

```python Python
import requests

response = requests.post(
    "https://sharnom.systems/admin/email",
    headers={"Content-Type": "application/json"},
    json={
        "subject": "Байгууллагын мэдээлэл засварлах хүсэлт",
        "body": "Манай байгууллагын утасны дугаар өөрчлөгдсөн...",
        "from": "manager@company.mn"
    }
)

data = response.json()
if data['status'] == 'Success':
    print("И-мэйл амжилттай илгээгдлээ")
```
</CodeGroup>

---

## Request Body

<ParamField body="subject" type="string" required>
  И-мэйлийн сэдэв (5-200 тэмдэгт)
</ParamField>

<ParamField body="body" type="string" required>
  И-мэйлийн агуулга (10-2000 тэмдэгт)
</ParamField>

<ParamField body="from" type="string" required>
  Илгээгчийн и-мэйл хаяг (email формат)
</ParamField>

---

## Example Requests

<Tabs>
  <Tab title="Мэдээлэл засварлах">
    ```json
    {
      "subject": "Байгууллагын мэдээлэл засварлах хүсэлт",
      "body": "Сайн байна уу. Манай байгууллагын утасны дугаар 7000-0001-ээс 7000-0002 болж өөрчлөгдсөн байна. Системд шинэчлүүлж өгнө үү. Байгууллагын ID: 1",
      "from": "manager@coffeehouse.mn"
    }
    ```
  </Tab>
  
  <Tab title="Байгууллага нэмүүлэх">
    ```json
    {
      "subject": "Шинэ байгууллага нэмүүлэх хүсэлт",
      "body": "Сайн байна уу. Манай шинэ ресторан 'Монгол амт' Баянзүрх дүүрэгт нээгдсэн. Yellow Book-т нэмүүлэхийг хүсч байна. Холбоо барих утас: 7000-9999, И-мэйл: info@mongolamt.mn",
      "from": "owner@mongolamt.mn"
    }
    ```
  </Tab>
  
  <Tab title="Алдаа мэдэгдэх">
    ```json
    {
      "subject": "Системийн алдаа - Байгууллага олдохгүй байна",
      "body": "Сайн байна уу. ID: 123 байгууллагыг хайхад 404 алдаа гарч байна. Гэхдээ жагсаалтад харагдаж байна. Засаж өгнө үү.",
      "from": "user@example.com"
    }
    ```
  </Tab>
</Tabs>

---

## Response

<ResponseField name="value" type="boolean">
  `true` - амжилттай илгээгдсэн
</ResponseField>

<ResponseField name="data" type="null">
  Нэмэлт өгөгдөл (null)
</ResponseField>

<ResponseField name="msgList" type="array">
  Амжилтын мессеж
</ResponseField>

<ResponseField name="attrs" type="object">
  Нэмэлт атрибутууд
</ResponseField>

<ResponseField name="status" type="string">
  `"Success"` эсвэл `"Error"`
</ResponseField>

---

## Response Examples

<Tabs>
  <Tab title="Success (200)">
    ```json
    {
      "value": true,
      "data": null,
      "msgList": [
        "И-мэйл амжилттай илгээгдлээ"
      ],
      "attrs": {},
      "status": "Success"
    }
    ```
  </Tab>
  
  <Tab title="Validation Error (400)">
    ```json
    {
      "value": null,
      "data": null,
      "msgList": [
        "subject талбар заавал шаардлагатай",
        "body 10-аас дээш тэмдэгт байх ёстой",
        "from талбар буруу и-мэйл формат"
      ],
      "attrs": {},
      "status": "Error"
    }
    ```
  </Tab>
  
  <Tab title="Rate Limit (429)">
    ```json
    {
      "value": null,
      "data": null,
      "msgList": [
        "Хэт олон и-мэйл илгээж байна. 1 цагийн дараа дахин оролдоно уу."
      ],
      "attrs": {
        "retryAfter": 3600
      },
      "status": "Error"
    }
    ```
  </Tab>
</Tabs>

---

## Validation Rules

| Талбар | Шалгуур |
|--------|---------|
| `subject` | 5-200 тэмдэгт |
| `body` | 10-2000 тэмдэгт |
| `from` | И-мэйл формат (example@domain.com) |

---

## Code Examples

<CodeGroup>

```javascript JavaScript - Form Handler
async function sendAdminEmail(subject, body, from) {
  const response = await fetch('https://sharnom.systems/admin/email', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ subject, body, from })
  });
  
  const data = await response.json();
  return data;
}

// Ашиглалт
const result = await sendAdminEmail(
  'Байгууллагын мэдээлэл засварлах хүсэлт',
  'Манай байгууллагын утасны дугаар өөрчлөгдсөн...',
  'manager@company.mn'
);

if (result.status === 'Success') {
  console.log('И-мэйл амжилттай илгээгдлээ');
} else {
  console.error('Алдаа:', result.msgList);
}
```

```python Python - requests
import requests

def send_admin_email(subject, body, from_email):
    url = "https://sharnom.systems/admin/email"
    headers = {"Content-Type": "application/json"}
    data = {
        "subject": subject,
        "body": body,
        "from": from_email
    }
    
    response = requests.post(url, headers=headers, json=data)
    return response.json()

# Ашиглалт
result = send_admin_email(
    subject="Байгууллагын мэдээлэл засварлах хүсэлт",
    body="Манай байгууллагын утасны дугаар өөрчлөгдсөн...",
    from_email="manager@company.mn"
)

if result['status'] == 'Success':
    print("И-мэйл амжилттай илгээгдлээ")
```

```typescript TypeScript
interface AdminEmailRequest {
  subject: string;
  body: string;
  from: string;
}

interface AdminEmailResponse {
  value: boolean;
  data: null;
  msgList: string[];
  attrs: Record<string, any>;
  status: 'Success' | 'Error';
}

async function sendAdminEmail(
  request: AdminEmailRequest
): Promise<AdminEmailResponse> {
  const response = await fetch('https://sharnom.systems/admin/email', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(request)
  });
  
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }
  
  return await response.json();
}
```

</CodeGroup>

---

## Usage Examples

<AccordionGroup>
  <Accordion title="React Form Component" icon="react">
    ```jsx
    import React, { useState } from 'react';

    function AdminEmailForm() {
      const [formData, setFormData] = useState({
        subject: '',
        body: '',
        from: ''
      });
      const [status, setStatus] = useState(null);
      const [loading, setLoading] = useState(false);
      
      const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        
        try {
          const response = await fetch(
            'https://sharnom.systems/admin/email',
            {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(formData)
            }
          );
          
          const data = await response.json();
          
          if (data.status === 'Success') {
            setStatus({ 
              type: 'success', 
              message: 'И-мэйл амжилттай илгээгдлээ!' 
            });
            setFormData({ subject: '', body: '', from: '' });
          } else {
            setStatus({ 
              type: 'error', 
              message: data.msgList.join(', ') 
            });
          }
        } catch (error) {
          setStatus({ type: 'error', message: 'Алдаа гарлаа' });
        } finally {
          setLoading(false);
        }
      };
      
      return (
        <form onSubmit={handleSubmit}>
          <div>
            <label>Таны и-мэйл:</label>
            <input
              type="email"
              value={formData.from}
              onChange={(e) => setFormData({
                ...formData, 
                from: e.target.value
              })}
              required
            />
          </div>
          
          <div>
            <label>Сэдэв:</label>
            <input
              type="text"
              value={formData.subject}
              onChange={(e) => setFormData({
                ...formData, 
                subject: e.target.value
              })}
              minLength={5}
              maxLength={200}
              required
            />
          </div>
          
          <div>
            <label>Мессеж:</label>
            <textarea
              value={formData.body}
              onChange={(e) => setFormData({
                ...formData, 
                body: e.target.value
              })}
              minLength={10}
              maxLength={2000}
              required
            />
          </div>
          
          <button type="submit" disabled={loading}>
            {loading ? 'Илгээж байна...' : 'Илгээх'}
          </button>
          
          {status && (
            <div className={status.type}>
              {status.message}
            </div>
          )}
        </form>
      );
    }
    ```
  </Accordion>
  
  <Accordion title="Validation Helper" icon="check-double">
    ```javascript
    function validateEmailForm(subject, body, from) {
      const errors = [];
      
      // Subject validation
      if (!subject || subject.trim().length < 5) {
        errors.push('Сэдэв 5-аас дээш тэмдэгт байх ёстой');
      }
      if (subject && subject.length > 200) {
        errors.push('Сэдэв 200-аас бага тэмдэгт байх ёстой');
      }
      
      // Body validation
      if (!body || body.trim().length < 10) {
        errors.push('Мессеж 10-аас дээш тэмдэгт байх ёстой');
      }
      if (body && body.length > 2000) {
        errors.push('Мессеж 2000-аас бага тэмдэгт байх ёстой');
      }
      
      // Email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!from || !emailRegex.test(from)) {
        errors.push('И-мэйл хаяг буруу форматтай байна');
      }
      
      return {
        isValid: errors.length === 0,
        errors
      };
    }

    // Ашиглалт
    const validation = validateEmailForm(subject, body, from);
    if (!validation.isValid) {
      console.error('Validation алдаа:', validation.errors);
    }
    ```
  </Accordion>
</AccordionGroup>

---

## Rate Limiting

<Warning>
  **Rate limit:**
  - 5 и-мэйл / 1 цаг (нэг и-мэйл хаягаас)
  - 100 и-мэйл / өдөр (системд)
</Warning>

---

## Best Practices

<CardGroup cols={2}>
  <Card title="И-мэйл баталгаажуулах" icon="envelope-circle-check">
    Хэрэглэгчийн и-мэйл хаягийг баталгаажуулах
  </Card>
  
  <Card title="Captcha ашиглах" icon="shield-halved">
    Спам эсэргүүцэл
  </Card>
  
  <Card title="Loading state" icon="spinner">
    Илгээж байх үед харуулах
  </Card>
  
  <Card title="Form цэвэрлэх" icon="broom">
    Амжилттай илгээсний дараа form-г цэвэрлэх
  </Card>
</CardGroup>

---

## Email Template

Админд ирэх и-мэйлийн загвар:

```
From: {from}
Subject: [Yellow Book] {subject}

{body}

---
Илгээсэн: Yellow Book системээс
Огноо: {timestamp}
```

---

## Security

<AccordionGroup>
  <Accordion title="И-мэйл баталгаажуулалт" icon="shield-check">
    И-мэйл хаяг баталгаажуулалт шаардагдана
  </Accordion>
  
  <Accordion title="HTML injection эсэргүүцэл" icon="code">
    HTML injection эсэргүүцэл идэвхтэй
  </Accordion>
  
  <Accordion title="Rate limiting" icon="gauge-high">
    Rate limiting хэрэгждэг
  </Accordion>
  
  <Accordion title="Спам фильтр" icon="filter">
    Спам фильтр идэвхтэй
  </Accordion>
</AccordionGroup>

---

## Notes

<Info>
  - И-мэйл нь **админд шууд очино**
  - Хариулт **1-2 ажлын өдрийн** дотор ирнэ
  - **Яаралтай** асуудлын хувьд утасаар холбогдоно уу: +976-7000-0000
  - Spam и-мэйл илгээх нь хориотой
</Info>

---

## Related

<CardGroup cols={3}>
  <Card title="API Танилцуулга" icon="book" href="/api-reference/introduction">
    API танилцуулга
  </Card>
  
  <Card title="Тусламж" icon="life-ring" href="mailto:support@yellowbook.mn">
    support@yellowbook.mn
  </Card>
  
  <Card title="Утас" icon="phone" href="tel:+97670000000">
    +976-7000-0000
  </Card>
</CardGroup>